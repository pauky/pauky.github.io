<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="杨润炜"><meta name="copyright" content="杨润炜"><title>Cwalker</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">杨润炜</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">130</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">29</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">2</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Cwalker</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right"></span></div><div id="site-info"><div id="site-title">Cwalker</div><div id="site-sub-title"></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/a/80.html">如何在linux创建及删除软链</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-12-28</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span><div class="content"><p>##创建软链<br>linux的ln命令可以为我们创建一个文件或目录的链接，有两种链接，一种是软链，像windows下的快捷方式，一种是硬链，则像是副本。<br>命令格式：<br>ln [参数][源文件或目录][目标文件或目录]<br>如：创建一个目录软链</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /test ~/test</span><br></pre></td></tr></table></figure>
<p>将根目录的test目录软链到当前用户目录的test目录</p>
<h2 id="删除软链"><a href="#删除软链" class="headerlink" title="删除软链"></a>删除软链</h2><p>如果想要删除这个目录软链，则直接rm，但需要注意的是，不要在目录后面加‘&#x2F;’，这样系统会尝试删除实际目录下的文件，并不是删除软链。<br>如删除上述软链目录：<br>错误方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm ~/test/</span><br></pre></td></tr></table></figure>

<p>正确方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm ~/test</span><br></pre></td></tr></table></figure>

<p>删除文件软链也是直接rm</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/79.html">git 反转提交</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-12-20</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/git/">git</a></span><div class="content"><p>有时我们需要让仓库回退上前面的某个版本，相当于撤消一些版本修改，该如何操作呢？</p>
<h2 id="git-reset-版本回退"><a href="#git-reset-版本回退" class="headerlink" title="git reset 版本回退"></a>git reset 版本回退</h2><p>往往我们会想到reset的方式来回退版本。<br>具体方法是:<br>1.获取commit log id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>
<p>2.回退到指定commit</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset commitLogId</span><br></pre></td></tr></table></figure>
<p>reset还有一些注意点，可以参考<a target="_blank" rel="noopener" href="https://www.yangrunwei.com/a/77.html">git基本架构</a>这篇介绍</p>
<p>但这种方式会删除一些版本历史，在分支的合并或不同开发者对此分支的push提交会可能会造成比较多的冲突。因为其他开发者可能在一个较晚的commit基础上修改代码并提交，这时当仓库被reset到一个较早的版本，很有可能就会与这次提交的代码有冲突。</p>
<h2 id="git-revert-反转提交"><a href="#git-revert-反转提交" class="headerlink" title="git revert 反转提交"></a>git revert 反转提交</h2><p>如果你想让进行版本回退，但又不想删除版本历史避免代码冲突，可以使用反转提交的方式。<br>反转提交的操作方法跟reset很类似，先是获取到commit log id，然后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert commitLogId</span><br></pre></td></tr></table></figure>
<p>这种方式会让仓库的版本历史看起来就像正常工作时的代码提交，因为反转提交会创建一个新提交来达到版本回退的效果，所以版本历史会是一直向前的。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/78.html">git 切换到远程分支</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-12-20</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/git/">git</a></span><div class="content"><p>在实践开发中，git往往会有多个分支，有时候我们想将远程的某个分支拉下来作为一个本地分支，该如何操作呢？</p>
<p>下面演示下如何将远程dev分支拉到本地，并创建一个同名分支。<br>#####1.查看远程有哪些分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -va</span><br></pre></td></tr></table></figure>
<p>例如结果如下：</p>
<ul>
<li>master<br>remotes&#x2F;origin&#x2F;dev<br>remotes&#x2F;origin&#x2F;glowry</li>
</ul>
<p>#####2.拉取远程分支并创建本地分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch dev remotes/origin/dev</span><br></pre></td></tr></table></figure>

<p>#####3.查看本地分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>
<p>结果如下：<br>*master<br>dev</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/77.html">Git基本架构</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-12-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/git/">git</a></span><div class="content"><p>Git基本架构，如图：<br><img src="https://img.yangrunwei.com/article-img/20161215/f7f71965-d597-4d14-a579-3d2dfe2b8655--git%E6%9E%B6%E6%9E%84.png" alt="git架构" title="git架构"></p>
<p>大致可分为几个部分，分别是git目录、工作目录、暂存区、本地仓库、远程仓库，所有这些便组成了git的一个分支，当然有些可以是可选的，比如本地分支就没有远程仓库。<br>了解git的组成，可以让我们更能hold住开发时对代码的管理。比如切换分支时可对当前分支的修改放在stash，不用提交到本地仓库去；当前同时实现多个需求，可分别提交，方便版本迭代或者bug紧急处理；提交出错可回滚到适当位置，并可控制对当前修改的影响等等。<br>通过熟悉git架构，让代码开发更加愉快。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="http://gitbook.liuhui998.com/index.html">git book</a><br><a target="_blank" rel="noopener" href="https://github.com/xirong/my-git/blob/master/useful-git-command.md">useful git command</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/76.html">MNIST机器学习入门</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-10-16</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/ml/">ml</a></span><div class="content"><p>这段时间一直在了解机器学习方面的知识，因为涉及高等数学（主要是微积分）、概率论、统计学、线性代数等数学知识，不得不回归到大学的课本上，这是一个周期很长的学习过程。经过这段时间的沉淀，总算能看懂一些机器学习方面的理论知识，便在<a target="_blank" rel="noopener" href="http://wiki.jikexueyuan.com/project/tensorflow-zh/tutorials/mnist_beginners.html">极客学院的机器学习教程</a>进行机器学习方面的研究，主要是利用tensorflow这个工具来开发机器学习的应用。下面是我对入门教程的一些源码，算是做个笔记，也可以分享给和我一样正在入门的小伙伴。<br>这是根据教程写下来的代码，其中还包括了模型的保存，方便接下来做模型的实际应用。</p>
<h5 id="minist-py"><a href="#minist-py" class="headerlink" title="minist.py"></a>minist.py</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">from tensorflow.examples.tutorials.mnist import input_data</span><br><span class="line"></span><br><span class="line">mnist = input_data.read_data_sets(&quot;MNIST_data/&quot;, one_hot=True)</span><br><span class="line">print(&quot;Download Done!&quot;)</span><br><span class="line"></span><br><span class="line">x = tf.placeholder(tf.float32, [None, 784])</span><br><span class="line"></span><br><span class="line"># paras</span><br><span class="line">W = tf.Variable(tf.zeros([784, 10]))</span><br><span class="line">b = tf.Variable(tf.zeros([10]))</span><br><span class="line"></span><br><span class="line">y = tf.nn.softmax(tf.matmul(x, W) + b)</span><br><span class="line">y_ = tf.placeholder(tf.float32, [None, 10])</span><br><span class="line"></span><br><span class="line"># loss func</span><br><span class="line">cross_entropy = -tf.reduce_sum(y_ * tf.log(y))</span><br><span class="line"></span><br><span class="line">train_step = tf.train.GradientDescentOptimizer(0.01).minimize(cross_entropy)</span><br><span class="line"></span><br><span class="line"># init</span><br><span class="line">init = tf.initialize_all_variables()</span><br><span class="line"></span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(init)</span><br><span class="line"></span><br><span class="line"># train</span><br><span class="line">for i in range(1000):</span><br><span class="line">    batch_xs, batch_ys = mnist.train.next_batch(100)</span><br><span class="line">    sess.run(train_step, feed_dict=&#123;x: batch_xs, y_: batch_ys&#125;)</span><br><span class="line"></span><br><span class="line">correct_prediction = tf.equal(tf.arg_max(y, 1), tf.arg_max(y_, 1))</span><br><span class="line">accuracy = tf.reduce_mean(tf.cast(correct_prediction, &quot;float&quot;))</span><br><span class="line"></span><br><span class="line">print(&quot;Accuarcy on Test-dataset: &quot;, sess.run(accuracy, feed_dict=&#123;x: mnist.test.images, y_: mnist.test.labels&#125;))</span><br><span class="line"></span><br><span class="line"># save model </span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line">save_path = saver.save(sess, &quot;./model/minist_softmax.ckpt&quot;)</span><br><span class="line">print(&quot;Model saved in file: &quot;, save_path)</span><br></pre></td></tr></table></figure>
<p>运行上述代码便可得到模型。由于需要下载数据集，所以第一次运行会比较慢，需要耐心等待。</p>
<p>下面是应用模型对实际手写数字图片做识别的源码。你需要用ps做一些黑底白字的手写数字图片资源。</p>
<h5 id="test-minist-py"><a href="#test-minist-py" class="headerlink" title="test_minist.py"></a>test_minist.py</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: UTF-8 -*-  </span><br><span class="line">from PIL import Image</span><br><span class="line">from numpy import *</span><br><span class="line">import tensorflow as tf</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">if len(sys.argv) &lt; 2 :</span><br><span class="line">	print(&#x27;argv must at least 2. you give &#x27;+str(len(sys.argv)))</span><br><span class="line">	sys.exit()</span><br><span class="line">filename = sys.argv[1]</span><br><span class="line">im=Image.open(filename)</span><br><span class="line">img = array(im.resize((28, 28), Image.ANTIALIAS).convert(&quot;L&quot;))</span><br><span class="line"># data = transpose(img.ravel())</span><br><span class="line">data = img.reshape([1, 784])</span><br><span class="line"># print(data)</span><br><span class="line"></span><br><span class="line"># xData = tf.Variable(data, name=&quot;x&quot;)</span><br><span class="line"></span><br><span class="line">x = tf.placeholder(tf.float32, [None, 784])</span><br><span class="line">W = tf.Variable(tf.zeros([784, 10]))</span><br><span class="line">b = tf.Variable(tf.zeros([10]))</span><br><span class="line"></span><br><span class="line">y = tf.nn.softmax(tf.matmul(x, W) + b)</span><br><span class="line"># y = tf.add(b, tf.matmul(x, W))</span><br><span class="line"></span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line">init_op = tf.initialize_all_variables()</span><br><span class="line"></span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">	sess.run(init_op)</span><br><span class="line">	save_path = &quot;./model/minist_softmax.ckpt&quot;</span><br><span class="line">	saver.restore(sess, save_path)</span><br><span class="line">	# print(&quot;Model restored.&quot;)</span><br><span class="line">	predictions = sess.run(y, feed_dict=&#123;x: data&#125;)</span><br><span class="line">	print(predictions[0]);</span><br><span class="line">	# print(tf.arg_max(predictions[0], 1))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注：上述代码需要两个python库，Pillow和numpy，执行如下命令来安装。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Pillow numpy</span><br></pre></td></tr></table></figure>
<p>接下来可以通过命令指定需要测试的图片，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python test_minist.py ./img/test_1.jpg</span><br></pre></td></tr></table></figure>
<p>结果是一个数组，值为1的索引就代表识别出来的数字了。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/75.html">智能时代</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-08-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/read/">read</a></span><div class="content"><p>在罗辑思维那买到了吴军博士的《智能时代》抢鲜版。怀着面对即将出现的新一波浪潮的兴奋看了一遍，心想着要是能赶上这新一波科技浪潮该有多好啊！</p>
<p>《智能时代》主要是剖析数据的积累带来的新时代科技进展，及人工智能对各行业的深入影响，以及带来的社会就业问题反思。大数据及人工智能或将是第三次工业革命。它会像前两次那样，对全球经济及地球上所有人带来深远的影响，必须为它的到来及发展做好准备。</p>
<p>下面我以自己看书的理解，讲述智能时代是怎样到来的，对社会有怎样的影响，以及我个人对智能时代的看法。</p>
<p>人工智能这个概念从几十年前就被提出了，现在的爆发式发展趋势，主要得益于几十年来的数据积累，还有计算机性能的高速增长。数据是人工智能研究的能源，计算机性能也决定着人工智能研究的效率。</p>
<p>每一次的浪潮都会兴起一批新秀企业，也会淘汰一些创新落后的企业，商业巨头们意识到这次人工智能浪潮的迅猛，纷纷投入资源研究。其中著名的代表是google、facebook、apple还有中国的百度。力图抢先在人工智能领域上布局自己的产品。同时，一波又一波的关于人工智能的创业公司也如雨后春笋迅速冒起。另外，一些传统企业也在原先产品基础上加入人工智能应用，有些甚至会产生了新产业，就如书中所说的未来的农业、医疗、教育、制造业，其实也迅速被改造或已基本完成转型。这让人感觉已经身在智能时代中了。但她的影响力应该不仅如此。看看前两次工业革命就知道，变化会是多么彻底而深远。</p>
<p>每次想到人工智能，都仿佛还觉得她还在小时候的科幻故事中，没想到迅速发展的科技这么快就把她带到了现实的大门前了。面对眼前这一陌生而熟悉的她，恐惧也从心里滋长起来。担心她会抢走手中的工作，甚至统治人类世界。我对此的看法是，面对变化，改造自己，适者生存。这也让我想起之前的一部国产动画电影《小门神》，里面就讲述了必须面对现实的变化，改造自身，不断创新，最终才能适应新的环境。这次的人工智能也一样，人类只有不断发展自身，才不会被崛起的机器智能所“打败”。在未来机器与人类将会是相互竞争式地延续。</p>
<p>这是最好的时代，也是最坏的时代。未来将被掌握在2%的人手中，努力吧，骚年们！</p>
<p>以上就是我读《智能时代》的一些感想。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/74.html">解决mac 终端中文乱码</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-08-30</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span><div class="content"><p>mac终端下，用ssh远程连接服务器时，总是发出这样的警告：</p>
<blockquote>
<p>抛出的警告信息setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory Fix</p>
</blockquote>
<p>然后关于中文的输出则都会乱码。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>1.打开客户端SSH配置文件：</p>
<p>(Linux系统) sudo vi &#x2F;etc&#x2F;ssh&#x2F;ssh_config<br>或(OS X) sudo vi &#x2F;etc&#x2F;ssh_config</p>
<p>2.找到这一行，并在这一行前用”#”号注释它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#SendEnv LANG LC_*</span><br></pre></td></tr></table></figure>
<p>重新新建终端进行ssh连接，便发现不会乱码咯。</p>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>如果是通过修改终端的偏好设置，采取取消倒数第二栏的”set locale environment variables on startup”勾选状态(即不勾选这个选项)的方法，即会让本机的环境中文乱码。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="http://blog.xinspace.space/2015/08/06/osx-bash-locale/">Mac系统终端 -bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory Fix</a><br><a target="_blank" rel="noopener" href="http://www.cyberciti.biz/faq/os-x-terminal-bash-warning-setlocale-lc_ctype-cannot-change-locale/">OS X Terminal: -bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory Fix</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/73.html">ubuntu update openssl for fix CVE-2016-2107</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-08-25</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span><div class="content"><p>openssl <a target="_blank" rel="noopener" href="https://blog.cloudflare.com/yet-another-padding-oracle-in-openssl-cbc-ciphersuites/">CVE-2016-2107</a> 漏洞会对https网站安全导致较大的影响。下面介绍下在ubuntu14.04下如何升级openssl来解决这个漏洞。</p>
<p>首先查看openssl的版本，如果是1.0.0，则需要更新到1.0.1f。查看当前openssl版本命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl version</span><br></pre></td></tr></table></figure>

<p>在ubuntu下，可通过apt-get来更新opensll，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install --only-upgrade libssl1.0.0 openssl</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get dist-upgrade</span><br></pre></td></tr></table></figure>
<p>前者只更新openssl，后面会更新所有软件 ，请谨慎操作。</p>
<p>最后这一步有异议，网上有些说只要重启nignx，有些说需要重启服务器，但我先尝试了前者之后，没有有效，后来重启服务器之后才可以。后来想，可能是需要先停止nginx，再启动，而不是重启。现在我也懒得去重现这个问题了，答案让大家去揭晓吧，哈哈。</p>
<p>最后，我们可以在ssllabs上检测自己网站的安全性，最好是得到A+喔。格式是：<br><a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest/analyze.html?d=yoursite">https://www.ssllabs.com/ssltest/analyze.html?d=yoursite</a><br>如检测本站，就是：<a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest/analyze.html?d=yangrunwei.com">https://www.ssllabs.com/ssltest/analyze.html?d=yangrunwei.com</a></p>
<p>接下来，提供一些nginx上的配置，让你的网站在ssllabs上得到的分数更高。<br><a target="_blank" rel="noopener" href="https://linux.cn/article-5374-1.html">增强 nginx 的 SSL 安全性</a><br><a target="_blank" rel="noopener" href="https://cipherli.st/">一些服务器安全的配置</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://wiki.ubuntu.com/Security/Upgrades">ubuntu-upgrades</a><br><a target="_blank" rel="noopener" href="https://blog.cloudflare.com/yet-another-padding-oracle-in-openssl-cbc-ciphersuites/">Yet Another Padding Oracle in OpenSSL CBC Ciphersuites</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/72.html">linux shell conect mongo in correct lang environment</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-08-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/mongodb/">mongodb</a></span><div class="content"><p>在linux shell下执行mongo ip:port连接数据库时，报了如下错误：</p>
<h2 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed global initialization: BadValue Invalid or no user locale set. Please ensure LANG and/or LC_* environment variables are set correctly.</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>这是因为当前linux用户语言环境设置问题，执行如下命令可解决:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LC_ALL=C</span><br></pre></td></tr></table></figure>

<p>详细了解此命令，可看<a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-74180-id-2055792.html">这里</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/a/71.html">javascript for in 默认进行属性排序</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-08-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/tech/">tech</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/js/">js</a></span><div class="content"><p>js 提供了for in遍历对象，当遍历对象时，我们一般会以为遍历时的顺序会与我们定义对象时的顺序一样，当事实并不是如此，让我们来看看下面的示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var o = &#123;&#x27;名称&#x27;: 0, 2: 1, &#x27;1&#x27;: 2, &#x27;&lt;&#x27;: 3, &#x27;0K&#x27;: 4, &#x27;我&#x27;: 5, b: 6, a: 7&#125;;</span><br><span class="line">for (var key in o) &#123;</span><br><span class="line">    console.log(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果顺序为：</p>
<h5 id="1-2-名称-lt-0K-我-b-a"><a href="#1-2-名称-lt-0K-我-b-a" class="headerlink" title="1, 2, 名称, &lt;, 0K, 我, b, a"></a>1, 2, 名称, &lt;, 0K, 我, b, a</h5><p>如结果所示，数字或可被转换为数字的属性（暂时未发现有其它属性会被排序）被自动排序，并且会先被遍历到，其它属性则按照定义时的顺序。</p>
<p>使用Object.keys方法出来的顺序也是这种规则。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.keys(o); // [&quot;1&quot;, &quot;2&quot;, &quot;名称&quot;, &quot;&lt;&quot;, &quot;0K&quot;, &quot;我&quot;, &quot;b&quot;, &quot;a&quot;]</span><br></pre></td></tr></table></figure>

<p>出现这样的现象，其实是因为object本身就是一个无序的集合，Ecmascript中对它的解释如下：</p>
<blockquote>
<p>An object is a member of the type Object. It is an unordered collection of properties each of which contains a primitive value, object, or function. A function stored in a property of an object is called a method.</p>
</blockquote>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h5 id="数组替代"><a href="#数组替代" class="headerlink" title="数组替代"></a>数组替代</h5><p>数组本身是有顺序的，所以我们可以用数组来实现这种有顺序的遍历。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myData = [&#123;&#x27;名称&#x27;: 0&#125;, &#123;2: 1&#125;, &#123;&#x27;1&#x27;: 2&#125;, &#123;&#x27;&lt;&#x27;: 3&#125;, &#123;&#x27;OK&#x27;: 4&#125;, &#123;&#x27;我&#x27;:5&#125;, &#123;b: 6&#125;, &#123;a: 7&#125;];</span><br><span class="line">for (var item in myData) &#123;</span><br><span class="line">	console.log(myData[item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var keys = [&#x27;名称&#x27;, 2, &#x27;1&#x27;, &#x27;&lt;&#x27;, &#x27;0K&#x27;, &#x27;我&#x27;, &#x27;b&#x27;, &#x27;a&#x27;];</span><br><span class="line">var vals = [0, 1, 2, 3, 4, 5, 6, 7];</span><br><span class="line">for (var item in keys) &#123;</span><br><span class="line">	console.log(keys[item], vals[item]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>es6新增数据结构，本身也是有顺序的。请看下面示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var myObject = new Map();</span><br><span class="line">myObject.set(&#x27;名称&#x27;, 0);</span><br><span class="line">myObject.set(2, 1);</span><br><span class="line">myObject.set(&#x27;1&#x27;, 2);</span><br><span class="line">myObject.set(&#x27;&lt;&#x27;, 3);</span><br><span class="line">myObject.set(&#x27;OK&#x27;, 4);</span><br><span class="line">myObject.set(&#x27;我&#x27;, 5);</span><br><span class="line">myObject.set(&#x27;b&#x27;, 6);</span><br><span class="line">myObject.set(&#x27;a&#x27;, 7);</span><br><span class="line">for (var [key, value] of myObject) &#123;</span><br><span class="line">  console.log(key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="http://www.jstips.co/en/map-to-the-rescue-adding-order-to-object-properties/">Map() to the rescue; adding order to Object properties</a></p>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2022 By 杨润炜</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>